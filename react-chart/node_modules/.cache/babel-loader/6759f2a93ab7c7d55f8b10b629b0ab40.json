{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"/home/callezenwaka/project/graphs/react-chart1/src/components/PieChart/PieChart.tsx\";\nimport React from 'react';\nimport { useEffect, useRef } from \"react\";\nimport * as d3 from 'd3';\nimport './PieChart.css';\nvar PieChart = function PieChart(_ref) {\n  var items = _ref.items;\n  // const pieChart = useRef<HTMLDivElement>(null);\n  var pieChart = useRef(null);\n  useEffect(function () {\n    // remove g element tags\n    remove();\n    drawPieHandler(items);\n  }, [items]);\n  var remove = function remove() {\n    var g = d3.select(pieChart.current).selectAll('g');\n    var pieContainer = d3.select('#pieContainer').selectAll('#visibility');\n    if (pieContainer.size()) pieContainer.remove().exit();\n\n    // check the number of existing elements, if greater than 0; remove all existing ones\n    if (g.size()) g.remove().exit();\n  };\n  var drawPieHandler = function drawPieHandler(items) {\n    // Define dimensions\n    var width = 360;\n    var height = 360;\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 30,\n      left: 30\n    };\n    var radius = Math.min(width, height) / 2;\n    // Get positions for each data object\n    var piedata = d3.pie().value(function (d) {\n      return d.value;\n    })(items);\n    // Define arcs for graphing \n    var arc = d3.arc().innerRadius(0).outerRadius(radius);\n    // Define colors for graphing \n    var colors = d3.scaleOrdinal(['#ffa822', '#134e6f', '#ff6150', '#1ac0c6', '#dee0e6']);\n    // const colors = d3.scaleOrdinal()\n    //   .domain(d3.range(items.length) as unknown as string[])\n    // .range([(items) => items.label]);\n    //   .range( d3.quantize((t) => d3.interpolateGreens(t * 0.8 + 0.1), items.length)\n    //     .reverse() \n    //   );\n\n    // Define the size and position of svg\n    var svg = d3.select(pieChart.current).attr('width', width).attr('height', height).append('g').attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n    // Add tooltip\n    var tooldiv = d3.select('#pieContainer').append('div').attr('id', 'visibility').style('visibility', 'hidden').style('position', 'absolute').style('background-color', 'red');\n\n    // Draw pie\n    svg.append('g').selectAll('path').data(piedata).join('path').attr('d', arc).attr('fill', function (d) {\n      return colors(d.data.label);\n    }).attr('stroke', 'white').on('mouseover', function (e, d) {\n      tooldiv.style('visibility', 'visible').text(\"\".concat(d.data.label, \": \").concat(d.data.value));\n    }).on('mousemove', function (e, d) {\n      tooldiv.style('top', e.pageY - 50 + 'px').style('left', e.pageX - 50 + 'px');\n    }).on('mouseout', function () {\n      tooldiv.style('visibility', 'hidden');\n    });\n\n    // Add title\n    // const title = d3.select('#pieContainer')\n    // title.append('text')\n    //   .attr('x', (width / 2))\n    //   .attr('y', (margin.top / 5 - 10))\n    //   .attr('text-anchor', 'middle')\n    //   .attr('font-size', '16px')\n    //   .attr('fill', 'black')\n    //   .text('Test data');\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pie\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"pie--section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"pieContainer\",\n    className: \"pie--container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"pie--title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"Pie Chart\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pie--content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: pieChart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  })))));\n};\nexport default PieChart;","map":{"version":3,"names":["React","useEffect","useRef","d3","PieChart","items","pieChart","remove","drawPieHandler","g","select","current","selectAll","pieContainer","size","exit","width","height","margin","top","right","bottom","left","radius","Math","min","piedata","pie","value","d","arc","innerRadius","outerRadius","colors","scaleOrdinal","svg","attr","append","tooldiv","style","data","join","label","on","e","text","pageY","pageX"],"sources":["/home/callezenwaka/project/graphs/react-chart1/src/components/PieChart/PieChart.tsx"],"sourcesContent":["import React from 'react';\nimport { useEffect, useRef } from \"react\";\nimport { ChartType } from \"../../types/index\";\nimport * as d3 from 'd3';\nimport { PieArcDatum } from 'd3-shape'\nimport './PieChart.css';\n\nconst PieChart = ({ items }: { items: ChartType[] }) => {\n  // const pieChart = useRef<HTMLDivElement>(null);\n  const pieChart = useRef<SVGSVGElement>(null);\n\n  useEffect(() => {\n\n    // remove g element tags\n    remove();\n\n    drawPieHandler(items);\n\n  }, [items]);\n\n  const remove = () => {\n    const g = d3.select(pieChart.current).selectAll('g');\n    const pieContainer = d3.select('#pieContainer').selectAll('#visibility');\n    if(pieContainer.size()) pieContainer.remove().exit();\n\n    // check the number of existing elements, if greater than 0; remove all existing ones\n    if (g.size()) g.remove().exit();\n  };\n\n  const drawPieHandler = (items: ChartType[]) => {\n    // Define dimensions\n    const width = 360;\n    const height = 360;\n    const margin = { top: 30, right: 30, bottom: 30, left: 30 }\n    const radius = Math.min(width, height) / 2;\n    // Get positions for each data object\n    const piedata = d3.pie<ChartType>().value(d => d.value)(items);\n    // Define arcs for graphing \n    const arc = d3.arc<PieArcDatum<ChartType>>().innerRadius(0).outerRadius(radius)\n    // Define colors for graphing \n    const colors = d3.scaleOrdinal(['#ffa822', '#134e6f', '#ff6150', '#1ac0c6', '#dee0e6'])\n    // const colors = d3.scaleOrdinal()\n    //   .domain(d3.range(items.length) as unknown as string[])\n      // .range([(items) => items.label]);\n    //   .range( d3.quantize((t) => d3.interpolateGreens(t * 0.8 + 0.1), items.length)\n    //     .reverse() \n    //   );\n\n    // Define the size and position of svg\n    const svg = d3.select(pieChart.current)\n      .attr('width', width)\n      .attr('height', height)\n      .append('g')\n      .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2) + ')');\n\n    // Add tooltip\n    const tooldiv = d3.select('#pieContainer')\n      .append('div')\n      .attr('id', 'visibility')\n      .style('visibility', 'hidden')\n      .style('position', 'absolute')\n      .style('background-color', 'red')\n\n    // Draw pie\n    svg.append('g')\n      .selectAll('path')\n      .data(piedata)\n      .join('path')\n      .attr('d', arc)\n      .attr('fill', (d) => {\n        return colors(d.data.label) as string\n      })\n      .attr('stroke', 'white')\n      .on('mouseover', (e, d) => {\n        tooldiv.style('visibility', 'visible')\n          .text(`${d.data.label}: ${d.data.value}`)\n      })\n      .on('mousemove', (e, d) => {\n        tooldiv.style('top', (e.pageY - 50) + 'px')\n          .style('left', (e.pageX - 50) + 'px')\n      })\n      .on('mouseout', () => {\n        tooldiv.style('visibility', 'hidden')\n      })\n\n    // Add title\n    // const title = d3.select('#pieContainer')\n    // title.append('text')\n    //   .attr('x', (width / 2))\n    //   .attr('y', (margin.top / 5 - 10))\n    //   .attr('text-anchor', 'middle')\n    //   .attr('font-size', '16px')\n    //   .attr('fill', 'black')\n    //   .text('Test data');\n  }\n\n  return (\n    <div className=\"pie\">\n      <section className=\"pie--section\">\n        <div id='pieContainer' className=\"pie--container\">\n          <h1 className=\"pie--title\">Pie Chart</h1>\n          <div className=\"pie--content\">\n            <svg ref={pieChart}></svg>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default PieChart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}
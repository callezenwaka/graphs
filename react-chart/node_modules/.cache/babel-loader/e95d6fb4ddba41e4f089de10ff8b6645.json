{"ast":null,"code":"import _slicedToArray from \"/home/callezenwaka/project/graphs/react-chart1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/home/callezenwaka/project/graphs/react-chart1/src/components/BarChart/BarChart.tsx\";\nimport React from 'react';\nimport { useEffect, useRef, useState } from \"react\";\nimport * as d3 from 'd3';\nimport './BarChart.css';\nvar BarChart = function BarChart(_ref) {\n  var items = _ref.items;\n  var _useState = useState(360),\n    _useState2 = _slicedToArray(_useState, 2),\n    width = _useState2[0],\n    setWidth = _useState2[1];\n  var _useState3 = useState(360),\n    _useState4 = _slicedToArray(_useState3, 2),\n    height = _useState4[0],\n    setHeight = _useState4[1]; // const margin = { top: 30, right: 30, bottom: 30, left: 30 }\n  var barChart = useRef(null);\n  useEffect(function () {\n    var margin = {\n      top: 30,\n      right: 30,\n      bottom: 30,\n      left: 30\n    };\n    setWidth(360);\n    setHeight(360);\n\n    // drawBarHandler(items);\n\n    // remove g element tags\n    remove();\n\n    // \n    var svg = d3.select(barChart.current).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n\n    // x axis scale\n    var xScale = d3.scaleBand().domain(d3.range(items.length)).range([margin.left, width + margin.right]).padding(0.1);\n    svg.append('g').attr('transform', 'translate(0,' + height + ')').call(d3.axisBottom(xScale).tickFormat(function (d, i) {\n      return items[i].label;\n    }).tickSizeOuter(0));\n    var max = d3.max(items, function (d) {\n      return d.value;\n    });\n\n    // y axis scale\n    var yScale = d3.scaleLinear().domain([0, max]).range([height, margin.top]);\n    svg.append('g').attr('transform', 'translate(' + margin.left + ',0)').call(d3.axisLeft(yScale));\n\n    // Draw bars\n    svg.append('g').attr('fill', '#000000').selectAll('rect').data(items).join('rect').attr('x', function (d, i) {\n      return xScale(i);\n    }).attr('y', function (d) {\n      return yScale(d.value);\n    }).attr('height', function (d) {\n      return yScale(0) - yScale(d.value);\n    }).attr('width', xScale.bandwidth());\n\n    // Add title \n    // svg.append('text')\n    //   .attr('x', (width / 2))\n    //   .attr('y', (margin.top / 5 - 10))\n    //   .attr('text-anchor', 'middle')\n    //   .attr('font-size', '16px')\n    //   .attr('fill', 'black')\n    //   .text('Test data');\n  }, [items, width, height]);\n  var remove = function remove() {\n    var g = d3.select(barChart.current).selectAll('g');\n\n    // check the number of existing elements, if greater than 0; remove all existing ones\n    if (g.size()) {\n      g.remove().exit();\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"bar--section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bar--container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"bar--title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"Bar Chart\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bar--content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    ref: barChart,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  })))));\n};\nexport default BarChart;","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","BarChart","items","width","setWidth","height","setHeight","barChart","margin","top","right","bottom","left","remove","svg","select","current","attr","xScale","scaleBand","domain","range","length","padding","append","call","axisBottom","tickFormat","d","i","label","tickSizeOuter","max","value","yScale","scaleLinear","axisLeft","selectAll","data","join","bandwidth","g","size","exit"],"sources":["/home/callezenwaka/project/graphs/react-chart1/src/components/BarChart/BarChart.tsx"],"sourcesContent":["import React from 'react';\nimport { useEffect, useRef, useState } from \"react\";\nimport { ChartType } from \"../../types/index\";\nimport * as d3 from 'd3';\nimport './BarChart.css';\n\nconst BarChart = ({ items }: { items: ChartType[] }) => {\n  const [width, setWidth] = useState(360);\n  const [height, setHeight] = useState(360);\n  // const margin = { top: 30, right: 30, bottom: 30, left: 30 }\n  const barChart = useRef<SVGSVGElement>(null);\n\n  useEffect(() => {\n    const margin = { top: 30, right: 30, bottom: 30, left: 30 }\n    setWidth(360);\n    setHeight(360);\n\n    // drawBarHandler(items);\n\n    // remove g element tags\n    remove();\n\n    // \n    const svg = d3.select(barChart.current)\n      .attr('width', width + margin.left + margin.right)\n      .attr('height', height + margin.top + margin.bottom)\n\n    // x axis scale\n    const xScale = d3.scaleBand()\n      .domain(d3.range(items.length) as unknown as string[])\n      .range([margin.left, width + margin.right])\n      .padding(0.1)\n\n    svg.append('g')\n      .attr('transform', 'translate(0,' + height + ')')\n      .call(d3.axisBottom(xScale).tickFormat((d, i) => items[i].label).tickSizeOuter(0))\n\n    const max = d3.max(items, function (d) { return d.value })\n\n    // y axis scale\n    const yScale = d3.scaleLinear()\n      .domain([0, max] as number[])\n      .range([height, margin.top])\n\n    svg.append('g')\n      .attr('transform', 'translate(' + margin.left + ',0)')\n      .call(d3.axisLeft(yScale))\n\n    // Draw bars\n    svg.append('g')\n      .attr('fill', '#000000')\n      .selectAll('rect')\n      .data(items)\n      .join('rect')\n      .attr('x', (d, i) => xScale(i as unknown as string) as number)\n      .attr('y', d => yScale(d.value))\n      .attr('height', d => yScale(0) - yScale(d.value))\n      .attr('width', xScale.bandwidth())\n\n    // Add title \n    // svg.append('text')\n    //   .attr('x', (width / 2))\n    //   .attr('y', (margin.top / 5 - 10))\n    //   .attr('text-anchor', 'middle')\n    //   .attr('font-size', '16px')\n    //   .attr('fill', 'black')\n    //   .text('Test data');\n\n  }, [items, width, height]);\n\n  const remove = () => {\n    const g = d3.select(barChart.current).selectAll('g');\n\n    // check the number of existing elements, if greater than 0; remove all existing ones\n    if (g.size()) {\n      g.remove().exit();\n    }\n  };\n\n  return (\n    <div className=\"bar\">\n      <section className=\"bar--section\">\n        <div className=\"bar--container\">\n          <h1 className=\"bar--title\">Bar Chart</h1>\n          <div className=\"bar--content\">\n            <svg ref={barChart}></svg>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n};\n\nexport default BarChart;"],"mappings":"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"},"metadata":{},"sourceType":"module"}